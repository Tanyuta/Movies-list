{"remainingRequest":"/Users/tanyuta/Documents/tech_tasks/tech_task_adraba/node_modules/babel-loader/lib/index.js!/Users/tanyuta/Documents/tech_tasks/tech_task_adraba/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tanyuta/Documents/tech_tasks/tech_task_adraba/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tanyuta/Documents/tech_tasks/tech_task_adraba/src/components/ListMovies.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tanyuta/Documents/tech_tasks/tech_task_adraba/src/components/ListMovies.vue","mtime":1547505002144},{"path":"/Users/tanyuta/Documents/tech_tasks/tech_task_adraba/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tanyuta/Documents/tech_tasks/tech_task_adraba/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/tanyuta/Documents/tech_tasks/tech_task_adraba/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tanyuta/Documents/tech_tasks/tech_task_adraba/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _JSON$stringify from \"/Users/tanyuta/Documents/tech_tasks/tech_task_adraba/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'ListMovies',\n  data: function data() {\n    return {\n      items: [],\n      currentPage: 1,\n      totalPages: 1,\n      baseUrl: 'https://api.themoviedb.org/3',\n      apiKey: '9c0bb3e4f21289191ff35377e8ef2757',\n      imageUrl: 'https://image.tmdb.org/t/p/w342',\n      loaded: true\n    };\n  },\n  mounted: function mounted() {\n    this.getData();\n    this.scroll();\n  },\n  methods: {\n    getData: function getData() {\n      var _this = this;\n\n      if (this.currentPage > this.totalPages) {\n        return;\n      } else {\n        axios.get(this.baseUrl + '/discover/movie?api_key=' + this.apiKey + '&sort_by=popularity.desc' + '&page=' + this.currentPage).then(function (response) {\n          _this.totalPages = response.data.total_pages;\n          response.data.results.forEach(function (element) {\n            _this.items.push(element);\n          });\n          _this.loaded = false;\n        }).catch(function (error) {\n          throw new Error(error);\n        });\n      }\n    },\n    showDetaisMovie: function showDetaisMovie(movie) {\n      localStorage.setItem('movie', _JSON$stringify(movie));\n      this.$router.push('/details');\n    },\n    scroll: function scroll() {\n      var _this2 = this;\n\n      window.onscroll = function () {\n        var manualOffset = 10;\n        var bottomOfWindow = document.documentElement.scrollTop + window.innerHeight >= document.documentElement.offsetHeight - manualOffset;\n\n        if (bottomOfWindow) {\n          if (_this2.currentPage <= _this2.totalPages) {\n            _this2.loaded = true;\n            _this2.currentPage += 1;\n\n            _this2.getData();\n          }\n        }\n      };\n    }\n  }\n};",{"version":3,"sources":["ListMovies.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAcA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,WAAA,EAAA,CAFA;AAGA,MAAA,UAAA,EAAA,CAHA;AAIA,MAAA,OAAA,EAAA,8BAJA;AAKA,MAAA,MAAA,EAAA,kCALA;AAMA,MAAA,QAAA,EAAA,iCANA;AAOA,MAAA,MAAA,EAAA;AAPA,KAAA;AASA,GAZA;AAaA,EAAA,OAbA,qBAaA;AACA,SAAA,OAAA;AACA,SAAA,MAAA;AACA,GAhBA;AAiBA,EAAA,OAAA,EAAA;AAEA,IAAA,OAFA,qBAEA;AAAA;;AACA,UAAA,KAAA,WAAA,GAAA,KAAA,UAAA,EAAA;AACA;AACA,OAFA,MAEA;AACA,QAAA,KAAA,CAAA,GAAA,CAAA,KAAA,OAAA,GAAA,0BAAA,GAAA,KAAA,MAAA,GAAA,0BAAA,GAAA,QAAA,GAAA,KAAA,WAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,QAAA,CAAA,IAAA,CAAA,WAAA;AACA,UAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,YAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,OAAA;AACA,WAFA;AAGA,UAAA,KAAA,CAAA,MAAA,GAAA,KAAA;AACA,SAPA,EAQA,KARA,CAQA,UAAA,KAAA,EAAA;AACA,gBAAA,IAAA,KAAA,CAAA,KAAA,CAAA;AACA,SAVA;AAWA;AACA,KAlBA;AAmBA,IAAA,eAnBA,2BAmBA,KAnBA,EAmBA;AACA,MAAA,YAAA,CAAA,OAAA,CAAA,OAAA,EAAA,gBAAA,KAAA,CAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,UAAA;AACA,KAtBA;AAuBA,IAAA,MAvBA,oBAuBA;AAAA;;AACA,MAAA,MAAA,CAAA,QAAA,GAAA,YAAA;AACA,YAAA,YAAA,GAAA,EAAA;AACA,YAAA,cAAA,GAAA,QAAA,CAAA,eAAA,CAAA,SAAA,GAAA,MAAA,CAAA,WAAA,IAAA,QAAA,CAAA,eAAA,CAAA,YAAA,GAAA,YAAA;;AACA,YAAA,cAAA,EAAA;AACA,cAAA,MAAA,CAAA,WAAA,IAAA,MAAA,CAAA,UAAA,EAAA;AACA,YAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AACA,YAAA,MAAA,CAAA,WAAA,IAAA,CAAA;;AACA,YAAA,MAAA,CAAA,OAAA;AACA;AACA;AACA,OAVA;AAWA;AAnCA;AAjBA,CAAA","sourcesContent":["<template>\n    <div>\n        <div v-show=\"loaded\" class=\"loader\"></div>\n        <h1>Movies list</h1>\n        <ul>\n            <li v-for=\"(item, i) in items\" :key=\"i\" @click=\"showDetaisMovie(item)\">\n                <img :src=\"imageUrl + item.poster_path\" alt=\"\">\n                <h5 class=\"pt-3\">{{ item.original_title }}</h5>\n            </li>\n        </ul>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'ListMovies',\n        data() {\n            return {\n                items: [],\n                currentPage: 1,\n                totalPages: 1,\n                baseUrl: 'https://api.themoviedb.org/3',\n                apiKey: '9c0bb3e4f21289191ff35377e8ef2757',\n                imageUrl: 'https://image.tmdb.org/t/p/w342',\n                loaded: true\n            }\n        },\n        mounted() {\n            this.getData();\n            this.scroll();\n        },\n        methods: {\n    \n            getData() {\n                if (this.currentPage > this.totalPages) {\n                    return;\n                } else {\n                    axios.get(this.baseUrl + '/discover/movie?api_key=' + this.apiKey + '&sort_by=popularity.desc' + '&page=' + this.currentPage)\n                        .then(response => {\n                            this.totalPages = response.data.total_pages;\n                            response.data.results.forEach(element => {\n                                this.items.push(element);\n                            });\n                            this.loaded = false;\n                        })\n                        .catch(error => {\n                            throw new Error(error);\n                        });\n                }\n            },\n            showDetaisMovie(movie) {\n                localStorage.setItem('movie', JSON.stringify(movie));\n                this.$router.push('/details');\n            },\n            scroll() {\n                window.onscroll = () => {\n                    let manualOffset = 10\n                    let bottomOfWindow = document.documentElement.scrollTop + window.innerHeight >= (document.documentElement.offsetHeight - manualOffset);\n                    if (bottomOfWindow) {\n                        if (this.currentPage <= this.totalPages) {\n                            this.loaded = true;\n                            this.currentPage += 1;\n                            this.getData();\n                        }\n                    }\n                };\n            },\n        }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n    ul {\n        li {\n            display: inline-block;\n            vertical-align: top;\n            width: 25vw;\n            position: relative;\n            overflow: hidden;\n            margin: 10px;\n            &:hover {\n                section {\n                    opacity: 1;\n                    transform: translate3d(0, 0, 0);\n                }\n                img {\n                    transform: scale(0.9);\n                }\n            }\n            img {\n                width: 100%;\n                height: auto;\n                display: block;\n                transform: scale(1);\n                transition: transform 350ms ease-in-out;\n            }\n        }\n    }\n    \n    section {\n        position: absolute;\n        bottom: 0;\n        background: rgba(white, 0.9);\n        padding: 20px;\n        overflow: hidden;\n        height: 100%;\n        width: 100%;\n        overflow-y: scroll;\n        opacity: 0;\n        transform: translate3d(0, 10%, 0);\n        transition: opacity 350ms ease-in-out 150ms, transform 350ms ease-in-out 150ms;\n        h3 {\n            margin-bottom: 10px;\n            font-size: 18px;\n        }\n        p {\n            line-height: 1.4;\n            font-size: 15px;\n        }\n    }\n</style>\n"],"sourceRoot":"src/components"}]}